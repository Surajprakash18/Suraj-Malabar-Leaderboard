<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Leaderboard v21.0 | MGD Hesaraghatta</title>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-bg: #030308;
            --card-bg: #0d0d1a;
            --leader-bg: #14142e;
            --text-color: #ffffff;
            --accent-gold: #fcc419;
            --accent-blue: #4dabf7;
            --accent-green: #51cf66;
            --accent-red: #ff4d4d;
            --sub-text: #8e8eb2;
            --danger-red: rgba(255, 77, 77, 0.6);
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Startup Overlay */
        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--primary-bg); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .start-btn {
            padding: 20px 40px; background: var(--accent-gold); color: #000;
            border: none; border-radius: 50px; font-weight: 900; cursor: pointer;
            font-size: 1.5rem; letter-spacing: 2px; box-shadow: 0 0 30px var(--accent-gold);
        }

        .location-header {
            color: var(--accent-gold); font-size: 2rem; font-weight: 900;
            letter-spacing: 8px; margin-bottom: 5px; text-shadow: 0 0 20px rgba(252, 196, 25, 0.6);
        }

        .admin-header {
            color: var(--accent-blue); font-size: 0.8rem; font-weight: bold;
            letter-spacing: 3px; border: 1px solid var(--accent-blue);
            padding: 5px 20px; border-radius: 20px; margin-bottom: 20px;
        }

        /* Danger/No Growth Animation */
        @keyframes red-blink {
            0% { border-color: var(--accent-red); box-shadow: 0 0 5px var(--accent-red); }
            50% { border-color: transparent; box-shadow: 0 0 0px transparent; }
            100% { border-color: var(--accent-red); box-shadow: 0 0 5px var(--accent-red); }
        }

        .danger-zone {
            border: 2px solid var(--accent-red) !important;
            animation: red-blink 1.5s infinite !important;
        }

        /* Ticker */
        .ticker-wrap {
            width: 100%; max-width: 1000px; background: #0a0a1a;
            padding: 12px 0; margin-bottom: 30px; border-radius: 12px;
            overflow: hidden; border: 1px solid #1e1e3f;
        }
        .ticker-move { display: flex; width: max-content; animation: ticker 30s linear infinite; }
        .ticker-item { padding: 0 50px; color: var(--accent-gold); font-weight: 900; font-size: 0.9rem; white-space: nowrap; }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* Main Dashboard */
        .main-card {
            width: 100%; max-width: 1000px; background: var(--card-bg);
            padding: 30px; border-radius: 25px; margin-bottom: 40px;
            border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .row { margin-bottom: 25px; }
        .info { display: flex; justify-content: space-between; font-weight: 900; margin-bottom: 8px; }
        .progress-box { background: #000; height: 36px; border-radius: 18px; position: relative; border: 1px solid #222; overflow: hidden; }
        .fill { height: 100%; border-radius: 18px; transition: width 2s cubic-bezier(0.1, 0.5, 0.5, 1); }
        .avatar { position: absolute; right: 10px; top: 4px; font-size: 1.4rem; z-index: 2; }

        /* Staff Grid */
        .staff-grid {
            width: 100%; max-width: 1000px;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 15px;
        }

        .staff-card {
            background: var(--card-bg); padding: 20px; border-radius: 15px;
            border-left: 5px solid #333; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; position: relative;
        }

        .staff-card:hover { transform: translateY(-10px) scale(1.02); background: #15152a; }
        .leader-card { background: var(--leader-bg); }
        .top-performer-glow { border: 2px solid var(--accent-gold); box-shadow: 0 0 20px rgba(252,196,25,0.4); }

        /* Duel Tool */
        #duel-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 9000; flex-direction: column; align-items: center; justify-content: center;
        }
        .duel-box { 
            background: #111; padding: 40px; border-radius: 20px; text-align: center; 
            min-width: 250px; border: 2px solid #333;
        }

        .footer { margin-top: 60px; color: #444; font-weight: bold; letter-spacing: 2px; font-size: 0.8rem; padding-bottom: 40px; }
    </style>
</head>
<body>

    <div id="start-overlay">
        <h1 style="color:var(--accent-gold); margin-bottom:30px; letter-spacing:5px;">MGD RAJSABHA v21.0</h1>
        <button class="start-btn" onclick="startSystem()">INITIALIZE DASHBOARD</button>
        <p style="color:#555; margin-top:20px;">Click to enable Audio & Visuals</p>
    </div>

    <div class="location-header">MGD HESARAGHATTA</div>
    <div class="admin-header">MANAGED BY SURAJ PRAKASH</div>

    <div class="ticker-wrap">
        <div class="ticker-move" id="ticker-content"></div>
    </div>

    <div class="main-card" id="team-race">
        <h3 style="margin:0 0 25px 0; color:var(--accent-gold); text-align:center; letter-spacing: 3px;">TEAM PERFORMANCE</h3>
    </div>

    <div class="staff-grid" id="staff-container"></div>

    <div id="duel-overlay" onclick="closeDuel()">
        <h1 style="color:var(--accent-gold); margin-bottom:40px; letter-spacing: 10px;">DUEL MODE</h1>
        <div style="display:flex; align-items:center; gap:30px;" id="duel-content"></div>
        <p style="color:#444; margin-top:40px;">Click anywhere to return</p>
    </div>

    <div class="footer">MGD HESARAGHATTA ACCESS ONLY | v21.0 STABLE</div>

    <script>
        let audioCtx;
        let ambientOsc;
        let duelSelection = [];

        const staffData = [
            { n: "JAFFAR SIDDIK", t: "Precious", p: 31, l: true },
            { n: "MANU KR", t: "Divine", p: 16, l: true },
            { n: "NIVEDITHA S", t: "Mine", p: 8, l: true },
            { n: "BOREGOWDA", t: "Zoul", p: 4, l: true },
            { n: "LAKSHMI", t: "Precious", p: 111 },
            { n: "RAJESH", t: "Precious", p: 50 },
            { n: "MEGHANA", t: "Divine", p: 48 },
            { n: "SANDYA", t: "Divine", p: 36 },
            { n: "KALLAPPA", t: "Mine", p: 23 },
            { n: "SAROJA", t: "Mine", p: 17 },
            { n: "ASHIQ", t: "Mine", p: 11 },
            { n: "SACHIN K", t: "Zoul", p: 15 },
            { n: "JABBAR", t: "Zoul", p: 14 },
            { n: "ANDANI", t: "Zoul", p: 1 },
            { n: "MAHESH", t: "Mine", p: 0 },
            { n: "SHAMBHAVI", t: "Mine", p: 0 },
            { n: "VINYA", t: "Divine", p: 0 },
            { n: "NAVEEN", t: "Zoul", p: 0 },
            { n: "MUNEER", t: "Zoul", p: 0 },
            { n: "ARUN", t: "Zoul", p: 0 }
        ];

        const teams = [
            { n: "Precious", l: "Jaffar", p: 31, c: "#fcc419", a: "üèéÔ∏è" },
            { n: "Divine", l: "Manu", p: 16, c: "#4dabf7", a: "üèçÔ∏è" },
            { n: "Mine", l: "Niveditha", p: 8, c: "#51cf66", a: "üèÉ" },
            { n: "Zoul", l: "Boregowda", p: 4, c: "#ff4d4d", a: "üö∂" }
        ];

        function startSystem() {
            document.getElementById('start-overlay').style.display = 'none';
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            
            // Start Background Drone
            ambientOsc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            ambientOsc.type = 'triangle';
            ambientOsc.frequency.setValueAtTime(110, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.01, audioCtx.currentTime);
            ambientOsc.connect(gain);
            gain.connect(audioCtx.destination);
            ambientOsc.start();

            renderAll();
        }

        function playSound(freq, type, duration, vol = 0.05) {
            if(!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const g = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            g.gain.setValueAtTime(vol, audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);
            osc.connect(g);
            g.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playApplause() {
            for(let i=0; i<15; i++) {
                setTimeout(() => {
                    playSound(400 + Math.random()*1000, 'sine', 0.2, 0.02);
                }, i * 50);
            }
        }

        function renderAll() {
            // Ticker
            const ticker = document.getElementById('ticker-content');
            ticker.innerHTML = staffData.filter(s => s.p > 40).map(s => 
                `<div class="ticker-item">üèÜ ${s.n}: ${s.p}% ACHIEVED</div>`
            ).join('');

            // Teams
            const race = document.getElementById('team-race');
            teams.sort((a,b) => b.p - a.p).forEach(t => {
                const isBottom = t.p < 10;
                const row = document.createElement('div');
                row.className = `row ${isBottom ? 'danger-zone' : ''}`;
                row.onclick = () => {
                    if(t.p > 30) {
                        confetti({particleCount: 200, spread: 100});
                        playApplause();
                    }
                    playSound(200, 'square', 0.1);
                };
                row.innerHTML = `
                    <div class="info"><span style="color:${t.c}">üíé Team ${t.n} (<b>${t.l}</b>)</span><span>${t.p}%</span></div>
                    <div class="progress-box"><div class="fill" style="width:${t.p}%; background:${t.c}"></div><span class="avatar">${t.a}</span></div>
                `;
                race.appendChild(row);
            });

            // Staff
            const container = document.getElementById('staff-container');
            staffData.sort((a,b) => b.p - a.p).forEach(s => {
                const card = document.createElement('div');
                const isBottom = s.p === 0;
                card.className = `staff-card ${s.l ? 'leader-card' : ''} ${s.p >= 100 ? 'top-performer-glow' : ''} ${isBottom ? 'danger-zone' : ''}`;
                
                card.onclick = () => {
                    playSound(600, 'sine', 0.1);
                    if(s.p >= 100) {
                        confetti({particleCount: 200, spread: 70, colors: ['#ff0000', '#ffd700']});
                        playApplause();
                    }
                    handleDuel(s, card);
                };

                card.innerHTML = `
                    <div style="font-weight:900; font-size:1rem;">${s.n} ${s.p >= 100 ? 'üëë' : ''}</div>
                    <div style="font-size:0.7rem; color:var(--sub-text); margin-top:5px;">TEAM ${s.t.toUpperCase()} | ${s.p}%</div>
                    <div style="background:#000; height:6px; border-radius:3px; margin-top:10px; overflow:hidden;">
                        <div style="background:var(--accent-blue); width:${Math.min(s.p, 100)}%; height:100%;"></div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function handleDuel(s, el) {
            if(duelSelection.includes(s)) return;
            duelSelection.push(s);
            el.style.border = "2px solid var(--accent-blue)";
            if(duelSelection.length === 2) {
                setTimeout(() => {
                    const [s1, s2] = duelSelection;
                    document.getElementById('duel-content').innerHTML = `
                        <div class="duel-box"><h2>${s1.n}</h2><h1>${s1.p}%</h1></div>
                        <div style="font-weight:900; color:var(--accent-red); font-size:2rem;">VS</div>
                        <div class="duel-box"><h2>${s2.n}</h2><h1>${s2.p}%</h1></div>
                    `;
                    document.getElementById('duel-overlay').style.display = 'flex';
                }, 300);
            }
        }

        function closeDuel() {
            document.getElementById('duel-overlay').style.display = 'none';
            duelSelection = [];
            document.querySelectorAll('.staff-card').forEach(c => c.style.border = "none");
        }
    </script>
</body>
</html>
